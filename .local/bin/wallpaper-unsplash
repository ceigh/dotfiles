#!/usr/bin/env sh
# tags comma-separated
[ -z $2 ] && TAGS=dune || TAGS=$2
# image resolution
[ -z $3 ] && RESOLUTION=1920x1080 || RESOLUTION=$3
readonly URL="https://source.unsplash.com/featured/${RESOLUTION}/?${TAGS}"
# directory with local images
[ -z $4 ] && FALLBACK_DIR=~/pictures/wallpapers || FALLBACK_DIR=$4

# echo "Fetching image from $URL"

set_bg() {
  feh --bg-fill $URL || feh --bg-fill --randomize $FALLBACK_DIR
}

# set bg one time
[ "$1" = once ] && set_bg && exit 0

# set bg every 10 minutes
while true; do
  set_bg
  sleep 10m
done
